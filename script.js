const musicLibrary = {
    "เพลงน่ารักเหมือนแกเลย": {
      "ไทย": [
        { name: "เจ้าหนู - Polycat", url: "https://youtu.be/UweO1ICBR9o?si=Qv0OphhTtqS9Zv9F" },
        { name: "รอยยิ้ม - scrubb", url: "https://youtu.be/czvDyFfVoVU?si=Ir3UBBqdFobayeRz" },
        { name: "อยากมองเธอในแง่ร้าย", url: "https://youtu.be/NxzPg5WmJUs?si=5mZ5aUKFBrD8FQGL" },
        { name: "หินหยดลงน้ำ - YENTED", url: "https://youtu.be/oPnjEiwH0Vk?si=OugjySzQ19ilWpC0" },
        { name: "สวนดอกไม้ - jaei", url: "https://youtu.be/54P5SlHSKYI?si=o05kilA2cLniV8NP" }
      ],
      "สากล": [
        { name: "Casual", url: "https://youtu.be/fACfypWLqXg?si=0wo2hJMkanTkO5_V" },
        { name: "once upon a time - jeff bernat", url: "https://youtu.be/UuaIGT-ZlWA?si=roXaWRdguolAkxWY" },
        { name: "Too Good", url: "https://youtu.be/W7O03rIvP3w?si=PvenbrKgWjoEGnO9" },
        { name: "magic", url: "https://youtu.be/eNVpmZM2XDA?si=DFGZKKbo3xO-O5Sc" },
        { name: "complicated - the millennial club", url: "https://youtu.be/CKL5YY9-p_Y?si=IoFVuDdt5XB4hzPR" }
      ],
      "R&B": [
        { name: "camped - rini", url: "https://youtu.be/YsBR5xGP96Y?si=vIeA8HDqRAWgmTS2" },
        { name: "everyday feels like sunday", url: "https://youtu.be/wyexaEZIow8?si=ItP9Jbeheu-CyxuC" },
        { name: "forget about you", url: "https://youtu.be/gT_P-eFB8rc?si=X3nFHz50kIGi4GSV" },
        { name: "love never felt so good", url: "https://youtu.be/0wnuTGGuAVs?si=QlyLX3Tbx0eiWtla" },
        { name: "( I like ) the way you love me", url: "https://youtu.be/qWr8M7zwkME?si=Dn5jxLg-4q2jP0QH" }
      ],
      "T-Pop": [
        { name: "รู้งี้เป็นแฟนกับเธอนานแล้ว", url: "https://youtu.be/5wunh46uVKY?si=3scayLXyUCcmylc7" },
        { name: "เกินต้าน", url: "https://youtu.be/9zXeLZTBd80?si=z5xIBk5ErT_ATW_a" },
        { name: "someone someday", url: "https://youtu.be/Vo95UQIonOw?si=B-kaLbwF70Pv9jl5" },
        { name: "ที่รักครับ", url: "https://youtu.be/ugpmgunWxUU?si=Cj66JjNSFIzWqfwx" },
        { name: "ลอง", url: "https://youtu.be/QBtIJe9db5Y?si=rDssrXc9JxIMKPCZ" }
      ]
    },
    "ใครอยากเป็นแค่เพื่อนแก": {
      "ไทย": [
        { name: "เพื่อน", url: "https://youtu.be/NmTG5wuAgUA?si=DtjF6cJLI1xHuL7I" },
        { name: "POLYCAT - Chapter 1 เพื่อนไม่จริง", url: "https://youtu.be/DNIDBbjqFCo?si=KdHvo67H0S8oCfm-" },
        { name: "POLYCAT - เพื่อนพระเอก | GOODFELLA", url: "https://youtu.be/tgQpUTDBI1A?si=mLChOklRVfY32WL9" },
        { name: "The Parkinson - เพื่อนรัก (Dear Friend)", url: "https://youtu.be/EPZfaGPP3cA?si=rlTBld6grCXQTyUJ" },
        { name: "เพื่อนดีเด่น (BEST FRIEND 4EVER) - SERIOUS BACON", url: "https://youtu.be/fMKwJnqtaBA?si=_cUHYNEu4X7SoKyE" }
      ],
      "สากล": [
        { name: "Dhruv - double take", url: "https://youtu.be/R8FHtIhWqNo?si=rPQ8EW0s6dNCr5eh" },
        { name: "Honesty - Pink Sweat$", url: "https://youtu.be/UnsCOkyTaak?si=9ak1jv066bLrFLcx" },
        { name: "Numcha - Keep Cold", url: "https://youtu.be/g8z3rLjmFUc?si=ah5ArJmqJqOLqL8W" },
        { name: "Adrian Milanio - Over & Over", url: "https://youtu.be/AIDmlfRALDg?si=m7tkv7YJTU7ATGVM" },
        { name: "Taylor Swift - Teardrops On My Guitar", url: "https://youtu.be/xKCek6_dB0M?si=VfuLg5q2vpT4l3iO" }
      ],
      "R&B": [
        { name: "Waste No Time", url: "https://youtu.be/XuHKxnR5XfU?si=mpyNQhrXGfWIGLYO" },
        { name: "WIM - Snacks & Wine", url: "https://youtu.be/4mQAZgV9_AM?si=mUphMWvPd1XarKi8" },
        { name: "i confess - Rangga Jones", url: "https://youtu.be/RuDUd8T4MOI?si=UjgRZMi_8JGqCZac" },
        { name: "Thoughts", url: "https://youtu.be/_COj7dvkw4U?si=RRWrsn2NBJTqQc5f" },
        { name: "More And More - Finding Hope", url: "https://youtu.be/V1FUwo-UmN8?si=wWnyqAoFHM9gJhsY" }
      ],
      "T-Pop": [
        { name: "bamm - ใครเพื่อนแก", url: "https://youtu.be/yOwwa4wjuJ0?si=fwTuShqWOnfayAGg" },
        { name: "เธอ ๆ เพื่อนเราชอบ (Guess Who?) – SERIOUS BACON", url: "https://youtu.be/wGFRGiG_TKM?si=dx1-32MTukUvtN6F" },
        { name: "เพื่อนแบบใด ( I See It ) - JMNK", url: "https://youtu.be/zmnKk5ppMqg?si=E6HllrpHLGWQLCkN" },
        { name: "แค่ไหนแค่นั้น (NO MATTER WHAT)", url: "https://youtu.be/FuadV-aiigQ?si=31jYz5WOEtz4EpCC" },
        { name: "The Parkinson - Onlyfan", url: "https://youtu.be/37vuU29ccWk?si=fQ7unpxStONVGMSD" }
      ]
    },
    "เขาทำไว้ดีหรือเธอแค่ไม่ลืม": {
      "ไทย": [
        { name: "TATTOO COLOUR - รถไฟ", url: "https://youtu.be/tk4IVP-JuhI?si=oTHCwzBZGeaQcq-R" },
        { name: "POLYCAT - มันเป็นใคร", url: "https://youtu.be/PFRJvHXaNBk?si=TH7dosKXeSq-SmOm" },
        { name: "ต่อให้ - Season Five", url: "https://youtu.be/F9uqDmIEw8c?si=dH77ZKKlf2JjM3PT" },
        { name: "POLYCAT - ข้อความรูปยิ้ม", url: "https://youtu.be/lBhIgPGCgbI?si=2ruFRyDg4gcBykdU" },
        { name: "Chilling Sunday - คนเก่าเขาทำไว้ดี", url: "https://open.spotify.com/track/1qkIG72UU08DBiLyCL3vLH?si=EavmoVYsTVuvAX9Xk6bXtA" }
      ],
      "สากล": [],
      "R&B": [],
      "T-Pop": []
    }
};

const gameLibrary = {
    "เบื่อ อยากหาอะไรทำ": {
      "เกมคลายเครียด": [
        { name: "Stardew Valley", url: "https://store.steampowered.com/app/413150/Stardew_Valley/" },
        { name: "PowerWash Simulator", url: "https://store.steampowered.com/app/1290000/PowerWash_Simulator/" },
        { name: "Unpacking", url: "https://store.steampowered.com/app/1135690/Unpacking/" }
      ],
      "เกมใช้สมอง": [
        { name: "The Witness", url: "https://store.steampowered.com/app/210970/The_Witness/" },
        { name: "Baba Is You", url: "https://store.steampowered.com/app/736260/Baba_Is_You/" },
        { name: "Portal 2", url: "https://store.steampowered.com/app/620/Portal_2/" }
      ],
      "เกมเล่นกับเพื่อน": [
        { name: "Keep Talking and Nobody Explodes", url: "https://store.steampowered.com/app/341800/Keep_Talking_and_Nobody_Explodes/" },
        { name: "Pummel Party", url: "https://store.steampowered.com/app/880940/Pummel_Party/" },
        { name: "Human: Fall Flat", url: "https://store.steampowered.com/app/477160/Human_Fall_Flat/" }
      ],
      "เกมผจญภัย": [
        { name: "A Short Hike", url: "https://store.steampowered.com/app/1055540/A_Short_Hike/" },
        { name: "Firewatch", url: "https://store.steampowered.com/app/383870/Firewatch/" },
        { name: "Journey", url: "https://store.steampowered.com/app/638230/Journey/" }
      ]
    },
    "เหงา อยากหาเพื่อนเล่น": {
      "เกมเล่นกับเพื่อน": [
        { name: "Overcooked! 2", url: "https://store.steampowered.com/app/728880/Overcooked_2/" },
        { name: "Among Us", url: "https://store.steampowered.com/app/945360/Among_Us/" },
        { name: "Phasmophobia", url: "https://store.steampowered.com/app/739630/Phasmophobia/" }
      ],
      "เกมคลายเครียด": [
        { name: "Golf With Your Friends", url: "https://store.steampowered.com/app/431240/Golf_With_Your_Friends/" },
        { name: "Wobbly Life", url: "https://store.steampowered.com/app/1401310/Wobbly_Life/" },
        { name: "Totally Reliable Delivery Service", url: "https://store.steampowered.com/app/1011670/Totally_Reliable_Delivery_Service/" }
      ],
      "เกมใช้สมอง": [
        { name: "We Were Here", url: "https://store.steampowered.com/app/582500/We_Were_Here/" },
        { name: "Tick Tock: A Tale for Two", url: "https://store.steampowered.com/app/790740/Tick_Tock_A_Tale_for_Two/" },
        { name: "Escape Simulator", url: "https://store.steampowered.com/app/1435790/Escape_Simulator/" }
      ],
      "เกมผจญภัย": [
        { name: "It Takes Two", url: "https://store.steampowered.com/app/1426210/It_Takes_Two/" },
        { name: "Sea of Thieves", url: "https://store.steampowered.com/app/1172620/Sea_of_Thieves/" },
        { name: "Raft", url: "https://store.steampowered.com/app/648800/Raft/" }
      ]
    },
    "อยากหนีโลกไปในเกม": {
      "เกมผจญภัย": [
        { name: "Hollow Knight", url: "https://store.steampowered.com/app/367520/Hollow_Knight/" },
        { name: "Spiritfarer", url: "https://store.steampowered.com/app/972660/Spiritfarer/" },
        { name: "Ori and the Will of the Wisps", url: "https://store.steampowered.com/app/1057090/Ori_and_the_Will_of_the_Wisps/" }
      ],
      "เกมคลายเครียด": [
        { name: "Kind Words (lo fi chill beats to write to)", url: "https://store.steampowered.com/app/1070710/Kind_Words_lo_fi_chill_beats_to_write_to/" },
        { name: "Eastshade", url: "https://store.steampowered.com/app/715560/Eastshade/" },
        { name: "Cats Organized Neatly", url: "https://store.steampowered.com/app/1513120/Cats_Organized_Neatly/" }
      ],
      "เกมเล่นกับเพื่อน": [
        { name: "Don't Starve Together", url: "https://store.steampowered.com/app/322330/Dont_Starve_Together/" },
        { name: "Project Zomboid", url: "https://store.steampowered.com/app/108600/Project_Zomboid/" },
        { name: "Valheim", url: "https://store.steampowered.com/app/892970/Valheim/" }
      ],
      "เกมใช้สมอง": [
        { name: "The Talos Principle", url: "https://store.steampowered.com/app/257510/The_Talos_Principle/" },
        { name: "Outer Wilds", url: "https://store.steampowered.com/app/753640/Outer_Wilds/" },
        { name: "Return of the Obra Dinn", url: "https://store.steampowered.com/app/653530/Return_of_the_Obra_Dinn/" }
      ]
    }
};
  
function recommendGame() {
    const mood = document.getElementById("mood").value;
    const genre = document.getElementById("genre").value;
    const result = document.getElementById("result");
    const saveButton = document.getElementById("saveButton");
  
    if (!mood || !genre) {
      result.textContent = "กรุณาเลือกทั้งสองตัวเลือก";
      saveButton.style.display = "none";
      return;
    }
  
    const games = gameLibrary[mood]?.[genre];
    if (!games || games.length === 0) {
      result.textContent = "ยังไม่มีกิจกรรมในหมวดนี้";
      saveButton.style.display = "none";
      return;
    }
  
    const randomIndex = Math.floor(Math.random() * games.length);
    const game = games[randomIndex];
    result.innerHTML = `ขอแนะนำ<br><a href="${game.url}" target="_blank">${game.name}</a>`;
    saveButton.style.display = "inline-block";
}

function recommendSong() {
    const mood = document.getElementById("mood").value;
    const genre = document.getElementById("genre").value;
    const result = document.getElementById("result");
    const saveButton = document.getElementById("saveButton");
  
    if (!mood || !genre) {
      result.textContent = "กรุณาเลือกทั้งสองตัวเลือก";
      saveButton.style.display = "none";
      return;
    }
  
    const songs = musicLibrary[mood]?.[genre];
    if (!songs || songs.length === 0) {
      result.textContent = "ยังไม่มีเพลงในหมวดนี้";
      saveButton.style.display = "none";
      return;
    }
  
    const randomIndex = Math.floor(Math.random() * songs.length);
    const song = songs[randomIndex];
    result.innerHTML = `ขอแนะนำ<br><a href="${song.url}" target="_blank">${song.name}</a>`;
    saveButton.style.display = "inline-block";
}

function startPlanning() {
document.querySelector('.index-buttons').style.display = 'none';
document.getElementById('hidden-buttons').style.display = 'flex';
}

function goToGame() {
window.location.href = "game.html";
}

function goToMusic() {
window.location.href = "song.html";
}

function saveActivity() {
    const mood = document.getElementById('mood').value;
    const genre = document.getElementById('genre').value;
    const suggestedActivity = document.getElementById('result').innerHTML;

    const today = new Date().toISOString().split('T')[0];

    let activityType = "อื่น ๆ";
    const path = window.location.pathname;
    if (path.includes("song.html")) {
        activityType = "เพลง";
    } else if (path.includes("game.html")) {
        activityType = "เกม";
    }

    const activityEntry = {
        date: today,
        activity: suggestedActivity,
        mood: mood,
        genre: genre,
        activityType: activityType
    };

    const savedActivities = JSON.parse(localStorage.getItem('savedActivities')) || [];
    savedActivities.push(activityEntry);
    localStorage.setItem('savedActivities', JSON.stringify(savedActivities));

    alert("กิจกรรมถูกบันทึกแล้ว!");
}

document.addEventListener('DOMContentLoaded', () => {
    const tableBody = document.querySelector('#activityTable tbody');
    if (!tableBody) return;

    const hasSaved = localStorage.getItem('savedActivities');
    if (hasSaved) {
        document.getElementById('clearButtonWrapper').style.display = 'block';
    }
  
    const savedActivities = JSON.parse(localStorage.getItem('savedActivities')) || [];
    if (savedActivities.length === 0) {
      const row = document.createElement('tr');
      const cell = document.createElement('td');
      cell.colSpan = 5;
      cell.textContent = 'ยังไม่มีการบันทึกกิจกรรม';
      row.appendChild(cell);
      tableBody.appendChild(row);
    } else {
      savedActivities.forEach(entry => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${entry.date}</td>
            <td>${entry.activityType}</td>
            <td>${entry.mood}</td>
            <td>${entry.genre}</td>
            <td>${entry.activity}</td>
        `;
        tableBody.appendChild(row);
      });
    }
});

function clearActivities() {
    if (confirm("คุณแน่ใจหรือไม่ว่าต้องการลบกิจกรรมทั้งหมด?")) {
      localStorage.removeItem('savedActivities');
      location.reload();
    }
}